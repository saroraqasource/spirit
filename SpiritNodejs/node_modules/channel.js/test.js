const channel = require('./index.js');
const ch = new channel();

let tosay = [];
let todo = [];

function helloing(){
  ch.go(function*(){
    let i = 0;
    while(true){
      i++;
      yield ch.take(ch.timeout(1000));
      yield ch.put(tosay, "hello world"+i);
    }
  });
}

function walking(){
  ch.go(function*(){
    while(true){
      yield ch.take(ch.timeout(3000));
      yield ch.put(todo, "walking...");
    }
  });
}

function watchHelloing(){
  ch.go(function*(){
    while(true){
      let msg = yield ch.take(tosay);
      console.log(msg);
    }
  });
}

function watchWorking(){
  ch.go(function*(){
    while(true){
      let msg = yield ch.take(todo);
      console.log(msg);
    }
  });
}

watchWorking();
watchHelloing();
helloing();
walking();